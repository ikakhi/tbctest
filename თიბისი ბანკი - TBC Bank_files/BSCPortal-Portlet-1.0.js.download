BSCPortal = window.BSCPortal || {};

;(function(BSCPortal){
	
	var Portlet = {
			sayHello : function(){
				alert("Hello form Widgets!");
			},
			// change background color
			changeColor : function(id){
				$("#" + id).removeClass('errorField');
				$('.errMessages').remove();
				if (!$("#" + id).val()){
					$("#" + id).css('background-color', 'rgb(211,238,251)');
				} else {
					$("#" + id).css('background-color', 'rgb(255,255,255)');
				}
	        },
	        // reload whole portlet with ajax
	        reloadPortlet : function(portletNameSpace, data, callback){
	        	var plid = themeDisplay.getPlid();
	    		var nsShort = (portletNameSpace.substr(1)).substr(0, portletNameSpace.length-2);
	    		var portletId = "#p_p_id" + portletNameSpace;
	    		var loadId = "p_load" + portletNameSpace;
	    		var wrapperId = portletNameSpace + "load-wrapper";
	    		var url = portal_context + "/c/portal/render_portlet?p_l_id=" + plid+ "&p_p_id="+nsShort+"&p_p_action=0&p_p_state=normal&p_p_mode=view";
	    		$(portletId).empty().append('<div class="loading-animation" id="'+loadId+'"></div>');
	    		$(portletId).wrap('<div id="'+wrapperId+'"></div>');
	    		$("#" + wrapperId).load(url, data, function() {
	    			$(portletId).unwrap();
	    			if (callback) {
	    				callback();
	    			}
	    			BSCPortal.Utils.refreshWidgets(portletNameSpace);
	    		});
	        }
			
	};
	
	BSCPortal.Portlet = Portlet;
	
})(BSCPortal);